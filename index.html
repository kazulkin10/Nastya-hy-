import React, { useMemo, useState, useEffect } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { Heart, Sun, Moon, Star, MessageCircle, Send } from "lucide-react";

// ===== –ù–∞—Å—Ç—Ä–æ–π–∫–∏ =====
const YOU = "–ï–≥–æ—Ä";
const HER = "–ù–∞—Å—Ç—è";
// –£–∫–∞–∂–∏ —Å–≤–æ–π (–∏–ª–∏ –µ—ë) —Ç–µ–ª–µ–≥—Ä–∞–º-—é–∑–µ—Ä–Ω–µ–π–º –±–µ–∑ @
const TG_USERNAME = "Tkachev_Egor"; // ‚Üê –∑–∞–º–µ–Ω–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

const compliments = [
  "–†–∞–¥–∞, –∫–æ–≥–¥–∞ —Ç—ã –æ—Ç–¥—ã—Ö–∞–µ—à—å –∏ –±–µ—Ä–µ–∂—ë—à—å —Å–µ–±—è.",
  "–¢—ã –≤–∞–∂–Ω–∞—è —á–∞—Å—Ç—å –º–æ–µ–≥–æ –¥–Ω—è.",
  "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –µ—Å—Ç—å.",
  "–ü—É—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç —á—É—Ç—å –ª–µ–≥—á–µ, —á–µ–º –≤—á–µ—Ä–∞.",
  "–ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å ‚Äî —è —Ä—è–¥–æ–º.",
  "–¢—ã —É–º–µ–µ—à—å –¥–µ–ª–∞—Ç—å —Ç–µ–ø–ª–æ –∏–∑ –º–µ–ª–æ—á–µ–π.",
];

const quickMsgs = [
  "–°–ø–æ–∫–æ–π–Ω–æ–≥–æ –¥–Ω—è. –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–µ—à—å ‚Äî –ø–∏—à–∏.",
  "–ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–π –∫–æ–ª–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è, –ª–∞–¥–Ω–æ?", 
  "–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–±–æ—Ç—É ‚Äî —Ü–µ–Ω—é.",
  "–ï—Å–ª–∏ –Ω–∞–¥–æ –≤—ã–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è ‚Äî —è —Å–ª—É—à–∞—é.",
];

const palette = {
  light: {
    bg: "from-pink-50 via-violet-50 to-blue-50",
    card: "bg-white/80 backdrop-blur-sm",
    text: "text-zinc-800",
    sub: "text-zinc-500",
  },
  dark: {
    bg: "from-[#0b1220] via-[#0d0b1a] to-[#111827]",
    card: "bg-white/10 backdrop-blur-sm border border-white/10",
    text: "text-zinc-100",
    sub: "text-zinc-400",
  },
};

const Card = ({ children, className = "" }) => (
  <div className={`rounded-2xl p-5 shadow-xl ${className}`}>{children}</div>
);

export default function App() {
  const [dark, setDark] = useState(true);
  const colors = dark ? palette.dark : palette.light;
  const [idx, setIdx] = useState(0);
  const [copied, setCopied] = useState(false);

  const compliment = useMemo(() => compliments[idx % compliments.length], [idx]);

  useEffect(() => {
    if (copied) {
      const t = setTimeout(() => setCopied(false), 1200);
      return () => clearTimeout(t);
    }
  }, [copied]);

  const copyText = async (text) => {
    try {
      await navigator.clipboard.writeText(text);
      setCopied(true);
    } catch (_) {}
  };

  const tgLink = `https://t.me/${TG_USERNAME}`;

  return (
    <div className={`min-h-screen w-full bg-gradient-to-br ${colors.bg} ${colors.text} transition-colors duration-300`}> 
      {/* –ù–∞–≤–±–∞—Ä */}
      <nav className="max-w-3xl mx-auto px-4 py-5 flex items-center justify-between">
        <div className="flex items-center gap-2">
          <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ type: "spring", stiffness: 300, damping: 14 }}>
            <Heart className="w-5 h-5" />
          </motion.div>
          <span className="font-semibold tracking-tight">–ü—Ä–∏–≤–µ—Ç, {HER}</span>
        </div>
        <div className="flex items-center gap-2">
          <a
            href={tgLink}
            target="_blank"
            rel="noreferrer"
            className="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl border border-white/10 bg-emerald-500/20 hover:bg-emerald-500/30"
            title="–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram"
          >
            <Send className="w-4 h-4" /> <span className="text-sm">–ù–∞–ø–∏—Å–∞—Ç—å –≤ –¢–ì</span>
          </a>
          <button
            onClick={() => setDark((v) => v !== true)}
            className="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl border border-white/10 bg-white/10 hover:bg-white/20"
            title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"
          >
            {dark ? <Sun className="w-4 h-4" /> : <Moon className="w-4 h-4" />}<span className="text-sm">–¢–µ–º–∞</span>
          </button>
        </div>
      </nav>

      {/* –•–∏—Ä–æ */}
      <header className="max-w-3xl mx-auto px-4">
        <Card className={`${colors.card}`}>
          <div className="flex items-start justify-between gap-4">
            <div>
              <motion.h1 initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ duration: 0.5 }} className="text-2xl sm:text-3xl font-bold">
                –ù–µ–±–æ–ª—å—à–∞—è –æ—Ç–∫—Ä—ã—Ç–∫–∞ –æ—Ç {YOU}
              </motion.h1>
              <p className={`mt-2 ${colors.sub}`}>
                –ë–µ–∑ –º–µ—Ç–∞—Ñ–æ—Ä –∏ –ø–∞—Ñ–æ—Å–∞. –ü—Ä–æ—Å—Ç–æ —Ç—ë–ø–ª–æ–µ –º–µ—Å—Ç–æ —Å –ø–∞—Ä–æ–π —Ñ—Ä–∞–∑ –Ω–∞ –¥–µ–Ω—å –∏ –±—ã—Å—Ç—Ä—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏‚Äë—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏. –°–¥–µ–ª–∞–Ω–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ, —á—Ç–æ–±—ã –ø—Ä–∏—è—Ç–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, –∏ –Ω–∞ –ü–ö.
              </p>
            </div>
          </div>
        </Card>
      </header>

      {/* –û–¥–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å */}
      <section className="max-w-3xl mx-auto px-4 mt-5">
        <Card className={`${colors.card}`}>
          <div className="flex items-center gap-3 mb-2">
            <Star className="w-4 h-4" />
            <h2 className="font-semibold">–û–¥–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å</h2>
          </div>
          <div className="flex flex-col sm:flex-row sm:items-center gap-3 justify-between">
            <AnimatePresence mode="wait">
              <motion.p key={idx} initial={{ opacity: 0, y: 8 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -8 }} className="text-lg">
                {compliment}
              </motion.p>
            </AnimatePresence>
            <div className="flex gap-2">
              <button onClick={() => setIdx((v) => v + 1)} className="px-3 py-1.5 rounded-lg border border-white/10 bg-white/10 hover:bg-white/20">–ï—â—ë</button>
              <button onClick={() => copyText(compliment)} className="px-3 py-1.5 rounded-lg border border-emerald-500/30 bg-emerald-500/10 hover:bg-emerald-500/20">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
          </div>
          <AnimatePresence>
            {copied && (
              <motion.div initial={{ opacity: 0, y: 6 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -6 }} className="text-emerald-400 text-sm mt-2">
                –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ. –ú–æ–∂–Ω–æ –∫–∏–¥–∞—Ç—å –≤ —á–∞—Ç üôå
              </motion.div>
            )}
          </AnimatePresence>
        </Card>
      </section>

      {/* –ö–Ω–æ–ø–∫–∏‚Äë—Å–æ–æ–±—â–µ–Ω–∏—è */}
      <section className="max-w-3xl mx-auto px-4 mt-5">
        <Card className={`${colors.card}`}>
          <div className="flex items-center gap-3 mb-3">
            <MessageCircle className="w-4 h-4" />
            <h2 className="font-semibold">–ë—ã—Å—Ç—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</h2>
          </div>
          <div className="grid grid-cols-1 sm:grid-cols-2 gap-2">
            {quickMsgs.map((t, i) => (
              <button key={i} onClick={() => copyText(t)} className="text-left px-3 py-2 rounded-xl border border-white/10 bg-white/10 hover:bg-white/20">
                {t}
              </button>
            ))}
          </div>
          <div className={`mt-2 text-sm ${colors.sub}`}>–ù–∞–∂–º–∏, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —á–∞—Ç.</div>
        </Card>
      </section>

      {/* –§—É—Ç–µ—Ä */}
      <footer className="max-w-3xl mx-auto px-4 py-8 opacity-80">
        <div className="text-sm">–°–¥–µ–ª–∞–Ω–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –∏ —Å —É–≤–∞–∂–µ–Ω–∏–µ–º. –ï—Å–ª–∏ —á—Ç–æ ‚Äî –ø–∏—à–∏ –≤ –¢–ì.</div>
      </footer>
    </div>
  );
}
