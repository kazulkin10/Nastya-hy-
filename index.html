<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b1220" />
  <title>–ù–∞—Å—Ç–µ üå∏</title>
  <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90">üå∏</text></svg>' />
  <meta name="description" content="–õ–∏—á–Ω–∞—è —Ç—ë–ø–ª–∞—è –æ—Ç–∫—Ä—ã—Ç–∫–∞ –¥–ª—è –ù–∞—Å—Ç–∏: —Ñ–æ—Ç–æ, –ø–æ—Å–ª–∞–Ω–∏—è, –º—É–∑—ã–∫–∞, —Å—á—ë—Ç—á–∏–∫ –¥–Ω–µ–π, —Ç–∞–π–º–µ—Ä—ã, –ø–∞—Å—Ö–∞–ª–∫–∞ –∏ PWA. –ê–∫–∫—É—Ä–∞—Ç–Ω–æ –∏ –ø–ª–∞–≤–Ω–æ." />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html,body{height:100%;scroll-behavior:smooth}
    .glass{backdrop-filter:blur(10px)}
    .reveal{opacity:0;transform:translateY(12px);transition:opacity .5s ease,transform .5s ease}
    .reveal.show{opacity:1;transform:none}
    .blob{position:absolute;filter:blur(42px);opacity:.28}
    .shadow-soft{box-shadow:0 10px 30px rgba(0,0,0,.22)}
    /* Masonry */
    .masonry{column-gap:.75rem}
    .masonry>figure{break-inside:avoid;margin:0 0 .75rem}
    @media(min-width:640px){.masonry{column-count:2}}
    @media(min-width:1024px){.masonry{column-count:3}}
    /* Lightbox */
    .lb-enter{opacity:0;transform:scale(.98)}
    .lb-enter.show{opacity:1;transform:scale(1);transition:opacity .2s ease,transform .2s ease}
    /* Background canvas */
    canvas#bg{position:fixed;inset:0;z-index:-1}
    /* Install banner */
    #installBanner{position:fixed;left:0;right:0;bottom:0;z-index:9998}
    /* DND: –º–µ–Ω—å—à–µ –∞–Ω–∏–º–∞—Ü–∏–π */
    .dnd *{transition:none!important;animation:none!important}
  </style>
</head>
<body class="min-h-screen overflow-hidden bg-gradient-to-br from-[#0b1220] via-[#0d0b1a] to-[#111827] text-zinc-100" id="body">
  <canvas id="bg"></canvas>
  <!-- –¥–µ–∫–æ—Ä -->
  <div class="blob -z-10 w-72 h-72 bg-fuchsia-500/30 rounded-full top-10 -left-10"></div>
  <div class="blob -z-10 w-72 h-72 bg-sky-500/30 rounded-full -bottom-16 right-6"></div>

  <!-- GATE (–∫–æ–¥-–¥–æ—Å—Ç—É–ø) -->
  <div id="gate" class="fixed inset-0 z-[9999] bg-gradient-to-br from-[#0b1220] via-[#0d0b1a] to-[#111827] text-zinc-100 grid place-items-center">
    <div class="w-[92%] max-w-md glass bg-white/10 border border-white/10 rounded-2xl p-6 shadow-soft">
      <div class="text-center text-2xl">üîí –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è</div>
      <p class="text-center text-zinc-400 mt-2">–í–≤–µ–¥–∏ —Å–ª–æ–≤–æ‚Äë–∫–ª—é—á –∏ –Ω–∞–∂–º–∏ Enter.</p>
      $1
      <input id="gateInput" type="password" class="mt-4 w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 outline-none focus:ring-2 focus:ring-emerald-400 placeholder:text-zinc-400" placeholder="—Å–ª–æ–≤–æ" autofocus />
<button id="gateBtn" type="button" class="mt-3 w-full px-4 py-3 rounded-xl border border-emerald-500/30 bg-emerald-500/10 hover:bg-emerald-500/20">–í–æ–π—Ç–∏</button>
<div id="gateError" class="text-center text-sm text-rose-400 mt-2">–ù–µ–≤–µ—Ä–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.</div>
      $2
    </div>
  </div>

  <!-- Header -->
  <header class="max-w-6xl mx-auto px-4 pt-7 pb-2 select-none">
    <nav class="flex items-center justify-between gap-3 flex-wrap">
      <div class="flex items-center gap-3">
        <button id="eggBtn" class="w-9 h-9 rounded-2xl bg-white/10 grid place-items-center border border-white/10">üí´</button>
        <div class="font-semibold">–ü—Ä–∏–≤–µ—Ç, –ù–∞—Å—Ç—è</div>
        <span class="ml-2 text-[11px] px-2 py-0.5 rounded-full bg-white/10 border border-white/10">v6.0</span>
      </div>
      <div class="flex items-center gap-2 flex-wrap">
        <a id="tgLink" href="#" target="_blank" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl border border-emerald-500/30 bg-emerald-500/10 hover:bg-emerald-500/20">
          ‚úâÔ∏è <span class="text-sm">–ù–∞–ø–∏—Å–∞—Ç—å –≤ –¢–ì</span>
        </a>
        <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl border border-white/10 bg-white/10">
          <label class="text-sm">–§–æ–Ω</label>
          <select id="bgMode" class="bg-transparent outline-none text-sm">
            <option value="stars">–∑–≤—ë–∑–¥—ã</option>
            <option value="snow">—Å–Ω–µ–∂–∏–Ω–∫–∏</option>
            <option value="sakura">—Å–∞–∫—É—Ä–∞</option>
          </select>
        </div>
        <button id="themeBtn" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl border border-white/10 bg-white/10 hover:bg-white/20">
          <span id="themeIcon">‚òÄÔ∏è</span><span class="text-sm">–¢–µ–º–∞</span>
        </button>
        <button id="dndBtn" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl border border-white/10 bg-white/10 hover:bg-white/20">
          <span>üåô</span><span class="text-sm">–¢–∏—Ö–∏–π —Ä–µ–∂–∏–º</span>
        </button>
        <button id="notifyBtn" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl border border-emerald-600/30 bg-emerald-600/10 hover:bg-emerald-600/20">
          üîî <span class="text-sm">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
        </button>
        <button id="installBtn" class="hidden inline-flex items-center gap-2 px-3 py-1.5 rounded-xl border border-amber-500/30 bg-amber-500/10 hover:bg-amber-500/20">
          üì≤ <span class="text-sm">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</span>
        </button>
      </div>
    </nav>
  </header>

  <!-- Hero / –°—á—ë—Ç—á–∏–∫ –¥–Ω–µ–π + –ø—Ä–æ–≥—Ä–µ—Å—Å‚Äë–∫–æ–ª—å—Ü–∞ -->
  <section class="max-w-6xl mx-auto px-4">
    <div id="heroCard" class="reveal glass rounded-2xl p-6 md:p-7 border border-white/10 bg-white/10">
      <h1 class="text-2xl sm:text-3xl font-bold">–õ–∏—á–Ω–∞—è –æ—Ç–∫—Ä—ã—Ç–∫–∞ ‚Äî —Å–ø–æ–∫–æ–π–Ω–æ –∏ –ø–æ‚Äë—Ç—ë–ø–ª–æ–º—É</h1>
      <p class="mt-2 text-zinc-400">–§–æ—Ç–æ, –ø–æ—Å–ª–∞–Ω–∏—è, –º—É–∑—ã–∫–∞, —Å—á—ë—Ç—á–∏–∫ –Ω–∞—à–∏—Ö –ª–µ—Ç –∏ –Ω–µ–º–Ω–æ–≥–æ –º–∞–≥–∏–∏. –ë–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤.</p>

      <div class="mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4">
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4 text-center">
          <div class="text-xs text-zinc-400">–ú—ã –∑–Ω–∞–∫–æ–º—ã</div>
          <div id="sinceYMD" class="text-xl font-semibold">‚Äî</div>
          <div id="sinceDays" class="text-xs text-zinc-400">‚Äî</div>
        </div>
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4 grid grid-cols-2 gap-3">
          <div class="flex flex-col items-center justify-center">
            <div class="text-xs text-zinc-400 mb-1">–î–æ –î–† –ù–∞—Å—Ç–∏ (9 –¥–µ–∫–∞–±—Ä—è)</div>
            <svg width="110" height="110" viewBox="0 0 120 120">
              <circle cx="60" cy="60" r="50" stroke="rgba(255,255,255,.15)" stroke-width="10" fill="none"/>
              <circle id="ringHer" cx="60" cy="60" r="50" stroke="#a78bfa" stroke-width="10" fill="none" stroke-linecap="round" transform="rotate(-90 60 60)" stroke-dasharray="0 314"/>
              <text id="ringHerText" x="50%" y="54%" dominant-baseline="middle" text-anchor="middle" font-size="14">‚Äî</text>
              <text id="ringHerDays" x="50%" y="70%" dominant-baseline="middle" text-anchor="middle" font-size="10" fill="#c4b5fd">–¥–Ω–µ–π</text>
            </svg>
          </div>
          <div class="flex flex-col items-center justify-center">
            <div class="text-xs text-zinc-400 mb-1">–î–æ –î–† –ï–≥–æ—Ä–∞ (28 –¥–µ–∫–∞–±—Ä—è)</div>
            <svg width="110" height="110" viewBox="0 0 120 120">
              <circle cx="60" cy="60" r="50" stroke="rgba(255,255,255,.15)" stroke-width="10" fill="none"/>
              <circle id="ringHis" cx="60" cy="60" r="50" stroke="#34d399" stroke-width="10" fill="none" stroke-linecap="round" transform="rotate(-90 60 60)" stroke-dasharray="0 314"/>
              <text id="ringHisText" x="50%" y="54%" dominant-baseline="middle" text-anchor="middle" font-size="14">‚Äî</text>
              <text id="ringHisDays" x="50%" y="70%" dominant-baseline="middle" text-anchor="middle" font-size="10" fill="#86efac">–¥–Ω–µ–π</text>
            </svg>
          </div>
        </div>
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4 text-center">
          <div class="text-xs text-zinc-400">–î–æ –ø—Ä–æ–≥—É–ª–∫–∏ (14 —á–∏—Å–ª–æ, 12:00 MSK)</div>
          <div id="walkTimer" class="text-xl font-semibold">‚Äî</div>
          <div class="text-xs text-zinc-400">–í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –±—É–¥–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ üéâ</div>
        </div>
      </div>
    </div>
  </section>

  <!-- –ó–∞–ø–∏—Å–∫–∞ –¥–Ω—è + 3 —Ç—ë–ø–ª—ã–µ –≤–µ—â–∏ -->
  <section class="max-w-6xl mx-auto px-4 mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4">
    <div class="reveal glass rounded-2xl p-6 border border-white/10 bg-white/10">
      <div class="flex items-center gap-3 mb-3"><span>üìù</span><h2 class="font-semibold">–ó–∞–ø–∏—Å–∫–∞ –¥–Ω—è</h2></div>
      <blockquote class="text-sm sm:text-base leading-relaxed text-zinc-100/90 bg-white/5 border border-white/10 rounded-2xl p-4">
        –¢—ã –≤–∞–∂–Ω–∞. –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–µ—à—å –æ—Ç –≤—Å–µ–≥–æ ‚Äî –ø—Ä–æ—Å—Ç–æ –¥–∞–π –∑–Ω–∞—Ç—å. –Ø —Ä—è–¥–æ–º –∏ —Ç–∏—Ö–æ.
      </blockquote>
    </div>
    <div class="reveal glass rounded-2xl p-6 border border-white/10 bg-white/10">
      <div class="flex items-center gap-3 mb-3"><span>üåø</span><h2 class="font-semibold">–¢—Ä–∏ —Ç—ë–ø–ª—ã–µ –≤–µ—â–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è</h2></div>
      <p class="text-sm text-zinc-400 mb-3">–ó–∞–ø–∏—à–∏ –¥–æ —Ç—Ä—ë—Ö –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–∏—è—Ç–Ω–æ—Å—Ç–µ–π. –û–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ —É —Ç–µ–±—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ.</p>
      <div class="grid grid-cols-1 gap-2">
        <input id="g1" class="px-3 py-2 rounded-xl bg-white/5 border border-white/10 outline-none" placeholder="1) ..."/>
        <input id="g2" class="px-3 py-2 rounded-xl bg-white/5 border border-white/10 outline-none" placeholder="2) ..."/>
        <input id="g3" class="px-3 py-2 rounded-xl bg-white/5 border border-white/10 outline-none" placeholder="3) ..."/>
      </div>
      <div class="text-xs text-zinc-500 mt-2" id="gsaved">‚Äî</div>
    </div>
  </section>

  <!-- –ì–∞–ª–µ—Ä–µ—è (masonry) + –ª–∞–π—Ç–±–æ–∫—Å + –ø–æ–¥–ø–∏—Å–∏ -->
  <section class="max-w-6xl mx-auto px-4 mt-6">
    <div class="reveal glass rounded-2xl p-6 border border-white/10 bg-white/10">
      <div class="flex items-center justify-between mb-3">
        <div class="flex items-center gap-3"><span>üì∑</span><h2 class="font-semibold">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</h2></div>
        <label class="text-sm flex items-center gap-2"><input id="captionsToggle" type="checkbox" class="accent-emerald-400"/> –ø–æ–¥–ø–∏—Å–∏</label>
      </div>
      <div id="gallery" class="masonry">
        <figure><img loading="lazy" src="20250125_160454.jpg" alt="–ó–∏–º–∞" class="w-full rounded-2xl border border-white/10 shadow-soft bg-white/5 object-contain cursor-zoom-in"/><figcaption class="hidden text-[11px] text-zinc-400 mt-1">–ó–∏–º–∞</figcaption></figure>
        <figure><img loading="lazy" src="20250125_164132.jpg" alt="–ö–∞—Ç–æ–∫" class="w-full rounded-2xl border border-white/10 shadow-soft bg-white/5 object-contain cursor-zoom-in"/><figcaption class="hidden text-[11px] text-zinc-400 mt-1">–ö–∞—Ç–æ–∫</figcaption></figure>
        <figure><img loading="lazy" src="IMG_20250307_085915.jpg" alt="–ë—É–∫–µ—Ç" class="w-full rounded-2xl border border-white/10 shadow-soft bg-white/5 object-contain cursor-zoom-in"/><figcaption class="hidden text-[11px] text-zinc-400 mt-1">–ë—É–∫–µ—Ç</figcaption></figure>
        <figure><img loading="lazy" src="IMG_20250313_132014.jpg" alt="–ö–ª–∞—Å—Å ‚Äî —Ç–µ–ª–µ—Ñ–æ–Ω" class="w-full rounded-2xl border border-white/10 shadow-soft bg-white/5 object-contain cursor-zoom-in"/><figcaption class="hidden text-[11px] text-zinc-400 mt-1">–ö–ª–∞—Å—Å</figcaption></figure>
        <figure><img loading="lazy" src="IMG_20250313_134601_edit_13096874764951.jpg" alt="–ö–ª–∞—Å—Å ‚Äî –≤–æ–ª–æ—Å—ã" class="w-full rounded-2xl border border-white/10 shadow-soft bg-white/5 object-contain cursor-zoom-in"/><figcaption class="hidden text-[11px] text-zinc-400 mt-1">–ö–ª–∞—Å—Å</figcaption></figure>
        <figure><img loading="lazy" src="IMG_20250405_164952.jpg" alt="–®–æ—É" class="w-full rounded-2xl border border-white/10 shadow-soft bg-white/5 object-contain cursor-zoom-in"/><figcaption class="hidden text-[11px] text-zinc-400 mt-1">–®–æ—É</figcaption></figure>
        <figure><img loading="lazy" src="IMG_20250405_172025.jpg" alt="–°—Ü–µ–Ω–∞ 1" class="w-full rounded-2xl border border-white/10 shadow-soft bg-white/5 object-contain cursor-zoom-in"/><figcaption class="hidden text-[11px] text-zinc-400 mt-1">–°—Ü–µ–Ω–∞</figcaption></figure>
        <figure><img loading="lazy" src="IMG_20250405_172033.jpg" alt="–°—Ü–µ–Ω–∞ 2" class="w-full rounded-2xl border border-white/10 shadow-soft bg-white/5 object-contain cursor-zoom-in"/><figcaption class="hidden text-[11px] text-zinc-400 mt-1">–°—Ü–µ–Ω–∞</figcaption></figure>
        <figure><img loading="lazy" src="IMG_20250417_091150.jpg" alt="–í–µ—Å–Ω–∞" class="w-full rounded-2xl border border-white/10 shadow-soft bg-white/5 object-contain cursor-zoom-in"/><figcaption class="hidden text-[11px] text-zinc-400 mt-1">–í–µ—Å–Ω–∞</figcaption></figure>
      </div>
      <div class="text-[11px] text-zinc-400 mt-2">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º (–±–µ–∑ –æ–±—Ä–µ–∑–∫–∏), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä.</div>
    </div>
  </section>

  <!-- Lightbox overlay -->
  <div id="lightbox" class="fixed inset-0 bg-black/90 hidden">
    <div class="absolute inset-0 flex items-center justify-center select-none">
      <img id="lbImg" src="" alt="" class="max-w-[92vw] max-h-[88vh] rounded-xl lb-enter" />
    </div>
    <button id="lbClose" class="absolute top-3 right-3 text-white/80 text-2xl">‚úï</button>
    <button id="lbPrev" class="absolute left-3 top-1/2 -translate-y-1/2 text-white/80 text-2xl">‚Äπ</button>
    <button id="lbNext" class="absolute right-3 top-1/2 -translate-y-1/2 text-white/80 text-2xl">‚Ä∫</button>
  </div>

  <!-- –ü–æ—Å–ª–∞–Ω–∏—è –¥–ª—è –ù–∞—Å—Ç–∏ -->
  <section class="max-w-6xl mx-auto px-4 mt-6">
    <div class="reveal glass rounded-2xl p-6 border border-white/10 bg-white/10">
      <div class="flex items-center gap-3 mb-3"><span>üí¨</span><h2 class="font-semibold">–ù–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–≤ –¥–ª—è —Ç–µ–±—è</h2></div>
      <ul class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm leading-relaxed">
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è. –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–µ—à—å ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏, —è —Ä—è–¥–æ–º.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ë–µ—Ä–µ–≥–∏ –∫–æ–ª–µ–Ω–æ. –ù–∏–∫–∞–∫–æ–π –≥–æ–Ω–∫–∏ —Å–µ–≥–æ–¥–Ω—è.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –¥–µ–ª–∏—à—å—Å—è —Å–æ –º–Ω–æ–π –º–∞–ª–µ–Ω—å–∫–∏–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–¢—ã –≤–∞–∂–Ω–∞. –î–∞–∂–µ –∫–æ–≥–¥–∞ –≤—Å—ë –≤–æ–∫—Ä—É–≥ —Å–ø–µ—à–∏—Ç.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ï—Å–ª–∏ –±—É–¥–µ—Ç —Ç—è–∂–µ–ª–æ ‚Äî –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–º–æ–ª—á–∞—Ç—å –≤–º–µ—Å—Ç–µ.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ü—É—Å—Ç—å –≤–µ—á–µ—Ä –±—É–¥–µ—Ç —Å–ø–æ–∫–æ–π–Ω—ã–º –∏ —Ç—ë–ø–ª—ã–º.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–Ø —Ä—è–¥–æ–º –±–µ–∑ –¥–∞–≤–ª–µ–Ω–∏—è. –í—Å–µ–≥–¥–∞.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–¢—ã –¥–µ–ª–∞–µ—à—å –º–æ–π –¥–µ–Ω—å —Ç–µ–ø–ª–µ–µ, –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤–∞—è—Å—å —Å–æ–±–æ–π.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ ‚Äî –ª—É—á—à–µ —Å–∫–∞–∂–∏ –ø—Ä—è–º–æ. –Ø —Å–ª—É—à–∞—é.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–°–ø–∞—Å–∏–±–æ –∑–∞ –±—Ä–∞—Å–ª–µ—Ç: —è –Ω–æ—à—É –µ–≥–æ –∫–∞–∫ –∑–Ω–∞–∫ –∑–∞–±–æ—Ç—ã.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ù–∞ —É—Ä–æ–∫–∞—Ö ‚Äî —Ñ–æ–∫—É—Å, –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–∞—Ö ‚Äî –Ω–µ–º–Ω–æ–≥–æ —Å–º–µ—Ö–∞.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ù–µ —Ç—Ä–∞—Ç—å —Å–∏–ª—ã –Ω–∞ –ª–∏—à–Ω–∏—Ö –ª—é–¥–µ–π. –ë–µ—Ä–µ–≥–∏ —Å–µ–±—è.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–Ø —Ü–µ–Ω—é —Ç–≤–æ—é –ø—Ä—è–º–æ—Ç—É –∏ —á–µ—Å—Ç–Ω–æ—Å—Ç—å.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ü–∏—à–∏, –∫–æ–≥–¥–∞ –∑–∞—Ö–æ—á–µ—à—å. –Ø –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–∞—É–∑–∞ –æ—Ç –≤—Å–µ—Ö ‚Äî —Å–∫–∞–∂–∏, —è —Å–¥–µ–ª–∞—é —Ç–∏—à–∏–Ω—É.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ü—É—Å—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏–Ω–æ—Å—è—Ç —Ä–∞–¥–æ—Å—Ç—å, –∞ –Ω–µ –±–æ–ª—å.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤–µ—Ä–∏—à—å –≤ –º–µ–Ω—è, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —è —Å–æ–º–Ω–µ–≤–∞—é—Å—å.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–¢–≤–æ–∏ –º–µ–ª–æ—á–∏ ‚Äî —ç—Ç–æ –º–æ–π –±–æ–ª—å—à–æ–π —É—é—Ç.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî —É—Å—Ç—Ä–æ–∏–º –º–∞–ª–µ–Ω—å–∫—É—é –ø—Ä–æ–≥—É–ª–∫—É –±–µ–∑ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–¢—ã ‚Äî —á–µ–ª–æ–≤–µ–∫, —Å –∫–æ—Ç–æ—Ä—ã–º —Å–ø–æ–∫–æ–π–Ω–æ.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ü—É—Å—Ç—å —É—Ç—Ä–æ –Ω–∞—á–Ω—ë—Ç—Å—è –±–µ–∑ —Å–ø–µ—à–∫–∏ –∏ –ø–µ—Ä–µ–ø–∏—Å–æ–∫ ¬´—á–µ—Ä–µ–∑ —Å–∏–ª—É¬ª.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–Ø —Å–ª—ã—à—É —Ç–µ–±—è. –ò –≤–∏–∂—É. –í—Å–µ–≥–¥–∞.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ï—Å–ª–∏ –Ω–∞ –¥—É—à–µ —à—É–º–Ω–æ ‚Äî –Ω–∞–π–¥—ë–º —Ç–∏—Ö–∏–π —É–≥–æ–ª–æ–∫.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–≤–æ—é –¥–æ–±—Ä–æ—Ç—É –¥–∞–∂–µ –≤ —Å–ª–æ–∂–Ω—ã–µ –¥–Ω–∏.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–¢—ã –Ω–∏—á–µ–≥–æ –Ω–∏–∫–æ–º—É –Ω–µ –¥–æ–ª–∂–Ω–∞. –ë–µ—Ä–µ–≥–∏ —Å–∏–ª—ã –¥–ª—è –≤–∞–∂–Ω–æ–≥–æ.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ü—É—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è —É —Ç–µ–±—è –ø–æ–ª—É—á–∏—Ç—Å—è —Ö–æ—Ç—å –æ–¥–Ω–∞ –º–∞–ª–µ–Ω—å–∫–∞—è —Ä–∞–¥–æ—Å—Ç—å.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–Ø —Ä—è–¥–æ–º, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å, –∞ –Ω–µ —Ç—è–Ω—É—Ç—å –æ–¥–µ—è–ª–æ –Ω–∞ —Å–µ–±—è.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ú–Ω–µ –≤–∞–∂–Ω–æ, –∫–∞–∫ —Ç—ã. –ò —è —ç—Ç–æ –Ω–µ –∑–∞–±—É–¥—É.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ü–∏—à–∏, –¥–∞–∂–µ –µ—Å–ª–∏ ¬´–Ω–µ –æ —á–µ–º¬ª. –Ø —Ä–∞–¥ –ª—é–±–æ–º—É —Å–ª–æ–≤—É.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–æ–≤–µ—Ä–∏–µ. –Ø –±–µ—Ä–µ–≥—É –µ–≥–æ.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–ï—Å–ª–∏ —É—Å—Ç–∞–ª–∞ ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å. –Ø –ø–æ–¥—Å—Ç—Ä–∞—Ö—É—é.</li>
        <li class="p-3 rounded-xl border border-white/10 bg-white/5">–¢—ã ‚Äî –º–æ–π —á–µ–ª–æ–≤–µ–∫ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è.</li>
      </ul>
    </div>
  </section>

  <!-- –¢–∞–π–º–ª–∞–π–Ω 8 –ª–µ—Ç -->
  <section class="max-w-6xl mx-auto px-4 mt-6">
    <div class="reveal glass rounded-2xl p-6 border border-white/10 bg-white/10">
      <div class="flex items-center gap-3 mb-3"><span>üóìÔ∏è</span><h2 class="font-semibold">8 –ª–µ—Ç –∑–Ω–∞–∫–æ–º—ã</h2></div>
      <div class="flex gap-4 overflow-x-auto pb-3">
        <div class="min-w-[200px] rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-xs text-zinc-400">2017</div><div class="font-medium">1 —Å–µ–Ω—Ç—è–±—Ä—è</div><div class="text-xs text-zinc-400">–ü–µ—Ä–≤—ã–π –¥–µ–Ω—å ‚Äî –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ</div></div>
        <div class="min-w-[200px] rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-xs text-zinc-400">2018</div><div class="font-medium">–°–∫–∞–º—å—è</div><div class="text-xs text-zinc-400">–ü–µ—Ä–≤—ã–µ –±–æ–ª—å—à–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã</div></div>
        <div class="min-w-[200px] rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-xs text-zinc-400">2019</div><div class="font-medium">–î–æ–∂–¥—å</div><div class="text-xs text-zinc-400">–ü—Ä–æ–≥—É–ª–∫–∏ –ø–æ–¥ –¥–æ–∂–¥—ë–º</div></div>
        <div class="min-w-[200px] rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-xs text-zinc-400">2020</div><div class="font-medium">–ó–≤–æ–Ω–∫–∏</div><div class="text-xs text-zinc-400">–ï–∂–µ–≤–µ—á–µ—Ä–Ω–∏–µ —Å–æ–∑–≤–æ–Ω—ã</div></div>
        <div class="min-w-[200px] rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-xs text-zinc-400">2021</div><div class="font-medium">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div><div class="text-xs text-zinc-400">–¢—Ä—É–¥–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã ‚Äî –≤–º–µ—Å—Ç–µ</div></div>
        <div class="min-w-[200px] rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-xs text-zinc-400">2022</div><div class="font-medium">–†—é–∫–∑–∞–∫</div><div class="text-xs text-zinc-400">–ó–∞–±–æ—Ç–∞ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–∞—Ö</div></div>
        <div class="min-w-[200px] rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-xs text-zinc-400">2023</div><div class="font-medium">–ü–ª–µ–π–ª–∏—Å—Ç—ã</div><div class="text-xs text-zinc-400">–û–±–º–µ–Ω –º—É–∑—ã–∫–æ–π</div></div>
        <div class="min-w-[200px] rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-xs text-zinc-400">2024</div><div class="font-medium">–ü–∞—É–∑—ã</div><div class="text-xs text-zinc-400">–£—á–∏–º—Å—è –±–µ—Ä–µ—á—å —Å–∏–ª—ã</div></div>
        <div class="min-w-[200px] rounded-xl border border-white/10 bg-white/5 p-3"><div class="text-xs text-zinc-400">2025</div><div class="font-medium">–û—Ç–∫—Ä—ã—Ç–∫–∞</div><div class="text-xs text-zinc-400">–°–∞–π—Ç‚Äë–ø–æ–¥–∞—Ä–æ–∫</div></div>
      </div>
    </div>
  </section>

  <!-- –ú—É–∑—ã–∫–∞ -->
  <section class="max-w-6xl mx-auto px-4 mt-6">
    <div class="reveal glass rounded-2xl p-6 border border-white/10 bg-white/10">
      <div class="flex items-center gap-3 mb-3"><span>üéß</span><h2 class="font-semibold">–ù–µ–º–Ω–æ–≥–æ –º—É–∑—ã–∫–∏</h2></div>
      <p class="text-sm text-zinc-400 mb-3">–†–∞–∑–Ω—ã–µ –≤–∫—É—Å—ã ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–≥–ª—è–Ω—É—Ç—å –≤ –º–∏—Ä –¥—Ä—É–≥ –¥—Ä—É–≥–∞.</p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
        <a class="rounded-xl p-4 border border-white/10 bg-white/5 hover:bg-white/10" href="https://music.yandex.ru/playlists/lk.2fed664d-e8f2-4d99-86cb-839150e1c88a?utm_source=web&utm_medium=copy_link" target="_blank">
          <div class="font-medium mb-1">–ü–ª–µ–π–ª–∏—Å—Ç –ï–≥–æ—Ä–∞</div>
          <div class="text-zinc-400">–°–∏–º—Ñ–æ–Ω–∏–∫–∞/–º–µ—Ç–∞–ª. –ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å –¥–≤—É—Ö: Nightwish ‚Äî Shudder Before the Beautiful, Planet Hell.</div>
        </a>
        <a class="rounded-xl p-4 border border-white/10 bg-white/5 hover:bg-white/10" href="https://music.yandex.ru/playlists/lk.18d8535f-c596-4c96-a160-b743a0bf95e8?utm_medium=copy_link&ref_id=b0bb5bfb-3eed-4339-ae6a-94b4aed65c79" target="_blank">
          <div class="font-medium mb-1">–ü–ª–µ–π–ª–∏—Å—Ç –ù–∞—Å—Ç–∏</div>
          <div class="text-zinc-400">–õ—ë–≥–∫–∏–π –ø–æ–ø/–∏–Ω–¥–∏ –∏ –Ω–µ–º–Ω–æ–≥–æ –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∞. –°—Ç–∞—Ä—Ç: Tommee Profitt ‚Äî Sound of War, BTS ‚Äî Not Today.</div>
        </a>
      </div>
    </div>
  </section>

  <!-- Install banner (extra) -->
  <div id="installBanner" class="hidden bg-amber-500/10 border-t border-amber-500/30 text-amber-200 px-4 py-3">
    <div class="max-w-6xl mx-auto flex items-center justify-between gap-3">
      <div>üì≤ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç—É –æ—Ç–∫—Ä—ã—Ç–∫—É –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ? –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω.</div>
      <div class="flex items-center gap-2">
        <button id="installYes" class="px-3 py-1.5 rounded-lg border border-amber-400/40">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        <button id="installNo" class="px-3 py-1.5 rounded-lg border border-white/10">–ü–æ–∑–∂–µ</button>
      </div>
    </div>
  </div>

  <footer class="max-w-6xl mx-auto px-4 py-10 text-zinc-400 text-sm">
    –°–¥–µ–ª–∞–Ω–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ. –ï—Å–ª–∏ —á—Ç–æ ‚Äî –ø–∏—à–∏ –≤ –¢–ì.
  </footer>

  <script>
    // ===== –ù–ê–°–¢–†–û–ô–ö–ò =====
    const TG_USERNAME = "Tkachev_Egor"; // –∑–∞–º–µ–Ω–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
    document.getElementById('tgLink').href = `https://t.me/${TG_USERNAME}`;

    // ===== BACKGROUND MODES (stars/snow/sakura) =====
    const cvs = document.getElementById('bg');
    const ctx = cvs.getContext('2d');
    let W,H,items=[],BG_MODE = localStorage.getItem('bg_mode') || 'stars';
    const bgSel = document.getElementById('bgMode'); bgSel.value = BG_MODE;
    function resize(){ W=window.innerWidth; H=window.innerHeight; cvs.width=W; cvs.height=H; }
    function rnd(a,b){ return Math.random()*(b-a)+a; }
    function makeItems(){
      items = [];
      if(BG_MODE==='stars'){
        for(let i=0;i<70;i++) items.push({x:rnd(0,W),y:rnd(0,H),r:rnd(0.3,1.2),vx:rnd(-0.02,0.02),vy:rnd(0.01,0.05),a:rnd(0.3,0.8)});
      } else if(BG_MODE==='snow'){
        for(let i=0;i<60;i++) items.push({x:rnd(0,W),y:rnd(0,H),r:rnd(1,3),vy:rnd(0.2,0.6),vx:rnd(-0.2,0.2)});
      } else if(BG_MODE==='sakura'){
        for(let i=0;i<35;i++) items.push({x:rnd(0,W),y:rnd(0,H),s:rnd(6,14),vy:rnd(0.3,0.7),vx:rnd(-0.3,0.3),rot:rnd(0,Math.PI*2),vr:rnd(-0.01,0.01)});
      }
    }
    function draw(){ ctx.clearRect(0,0,W,H); if(BG_MODE==='stars'){ ctx.fillStyle='#fff'; for(const s of items){ ctx.globalAlpha=s.a; ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill(); s.x+=s.vx; s.y+=s.vy; if(s.y>H+10) s.y=-10; if(s.x<-10) s.x=W+10; if(s.x>W+10) s.x=-10; }}
      else if(BG_MODE==='snow'){ ctx.fillStyle='rgba(255,255,255,.9)'; for(const f of items){ ctx.beginPath(); ctx.arc(f.x,f.y,f.r,0,Math.PI*2); ctx.fill(); f.x+=f.vx; f.y+=f.vy; if(f.y>H+10){ f.y=-10; f.x=rnd(0,W);} }}
      else if(BG_MODE==='sakura'){ for(const p of items){ p.rot+=p.vr; p.x+=p.vx; p.y+=p.vy; if(p.y>H+20){ p.y=-20; p.x=rnd(0,W);} drawPetal(p.x,p.y,p.s,p.rot);} }
      requestAnimationFrame(draw); }
    function drawPetal(x,y,s,rot){ ctx.save(); ctx.translate(x,y); ctx.rotate(rot); ctx.fillStyle='rgba(255,192,203,.8)'; ctx.beginPath(); ctx.moveTo(0,-s*0.8); ctx.quadraticCurveTo(s*0.6,-s*0.2,0,s); ctx.quadraticCurveTo(-s*0.6,-s*0.2,0,-s*0.8); ctx.fill(); ctx.restore(); }
    window.addEventListener('resize', ()=>{ resize(); makeItems(); }); resize(); makeItems(); draw();
    bgSel.onchange = ()=>{ BG_MODE = bgSel.value; localStorage.setItem('bg_mode', BG_MODE); makeItems(); };

    // ===== DND (—Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º) =====
    const dndBtn = document.getElementById('dndBtn');
    let DND = localStorage.getItem('dnd')==='1';
    function applyDND(){ document.body.classList.toggle('dnd', DND); }
    applyDND();
    dndBtn.onclick = ()=>{ DND = !DND; localStorage.setItem('dnd', DND?'1':'0'); applyDND(); };

    // ===== –ü–ê–°–°–•–ê–õ–ö–ê: —Å–∞–∫—É—Ä–∞‚Äë–∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø–æ —Ç—Ä–æ–π–Ω–æ–º—É –∫–ª–∏–∫—É –Ω–∞ üí´ =====
    (function(){
      let clicks=0, timer=null; const btn=document.getElementById('eggBtn');
      btn.addEventListener('click', ()=>{
        clicks++; if(!timer){ timer=setTimeout(()=>{clicks=0; timer=null;},900);} 
        if(clicks>=3){ clearTimeout(timer); clicks=0; timer=null; runConfetti('sakura', 4500); }
      });
    })();

    // ===== –ö–û–ù–§–ï–¢–¢–ò =====
    function runConfetti(type="confetti", duration=4000){
      const cv = document.createElement('canvas'); cv.style.cssText='position:fixed;inset:0;pointer-events:none;z-index:9997'; document.body.appendChild(cv);
      const c=cv.getContext('2d'); let w=window.innerWidth,h=window.innerHeight; cv.width=w; cv.height=h;
      function rs(){ w=window.innerWidth; h=window.innerHeight; cv.width=w; cv.height=h; }
      window.addEventListener('resize', rs);
      const parts = []; const N = 120;
      for(let i=0;i<N;i++){ parts.push({x:Math.random()*w,y:-20*Math.random(),r:Math.random()*8+4,vy:Math.random()*1.5+0.8,vx:Math.random()*1.2-0.6,rot:Math.random()*6,vr:Math.random()*0.2-0.1,color:`hsl(${Math.random()*360},80%,60%)`}); }
      const sakura = type==='sakura'; const start=performance.now();
      function petal(ctx,x,y,s,rot){ ctx.save(); ctx.translate(x,y); ctx.rotate(rot); ctx.fillStyle='rgba(255,192,203,.9)'; ctx.beginPath(); ctx.moveTo(0,-s*0.8); ctx.quadraticCurveTo(s*0.6,-s*0.2,0,s); ctx.quadraticCurveTo(-s*0.6,-s*0.2,0,-s*0.8); ctx.fill(); ctx.restore(); }
      function loop(t){ const dt=t-start; c.clearRect(0,0,w,h); for(const p of parts){ p.y+=p.vy; p.x+=p.vx; p.rot+=p.vr; if(p.y>h+30){ p.y=-20; p.x=Math.random()*w; }
        if(sakura) petal(c,p.x,p.y,p.r,p.rot); else { c.save(); c.translate(p.x,p.y); c.rotate(p.rot); c.fillStyle=p.color; c.fillRect(-p.r/2,-p.r/2,p.r,p.r); c.restore(); }
      }
        if(dt<duration){ requestAnimationFrame(loop);} else { document.body.removeChild(cv); window.removeEventListener('resize', rs); }
      }
      requestAnimationFrame(loop);
    }

    // ===== –í–†–ï–ú–Ø MSK (UTC+3) =====
    const MSK_OFFSET = 3 * 60 * 60000; // –º—Å
    const nowUtcMs = ()=> Date.now() + (new Date().getTimezoneOffset()*60000);
    const nowMskDate = ()=> new Date(nowUtcMs() + MSK_OFFSET);

    // ===== –°–ß–Å–¢–ß–ò–ö –î–ù–ï–ô (—Å 2017-09-01 MSK) =====
    function calcYMD(fromY, fromM, fromD, now){
      let y = now.getFullYear() - fromY;
      let m = now.getMonth() + 1 - fromM;
      let d = now.getDate() - fromD;
      if(d<0){ m--; const prevMonthDays = new Date(now.getFullYear(), now.getMonth(), 0).getDate(); d += prevMonthDays; }
      if(m<0){ y--; m += 12; }
      return {y,m,d};
    }
    const firstMeetY=2017, firstMeetM=9, firstMeetD=1; // 01.09.2017
    function renderSince(){
      const nowM = nowMskDate();
      const ymd = calcYMD(firstMeetY, firstMeetM, firstMeetD, nowM);
      const firstMeetUtc = Date.UTC(firstMeetY, firstMeetM-1, firstMeetD, 0,0,0) - MSK_OFFSET; // 00:00 MSK
      const days = Math.floor((nowUtcMs() - firstMeetUtc)/86400000);
      document.getElementById('sinceYMD').textContent = `${ymd.y} –ª–µ—Ç ${ymd.m} –º–µ—Å ${ymd.d} –¥–Ω`;
      document.getElementById('sinceDays').textContent = `${days.toLocaleString('ru-RU')} –¥–Ω–µ–π —Å–æ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.`;
    }
    renderSince(); setInterval(renderSince, 60*1000);

    // ===== –¢–ê–ô–ú–ï–†–´ –ù–ê –î–† (MSK) + –ü–†–û–ì–†–ï–°–°‚Äë–ö–û–õ–¨–¶–ê =====
    const CIRC = 2*Math.PI*50; // r=50
    function prevOccurMSK(month, day){
      const nowM = nowMskDate(); let y = nowM.getFullYear();
      let t = Date.UTC(y, month-1, day, 0,0,0) - MSK_OFFSET;
      if(t > nowUtcMs()) t = Date.UTC(y-1, month-1, day, 0,0,0) - MSK_OFFSET;
      return t;
    }
    function nextOccurMSK(month, day){
      const nowM = nowMskDate(); let y = nowM.getFullYear();
      let t = Date.UTC(y, month-1, day, 0,0,0) - MSK_OFFSET;
      if(t <= nowUtcMs()) t = Date.UTC(y+1, month-1, day, 0,0,0) - MSK_OFFSET;
      return t;
    }
    function renderRing(elRing, elText, elDays, month, day){
      const prev = prevOccurMSK(month, day);
      const next = nextOccurMSK(month, day);
      const now = nowUtcMs();
      const total = next - prev; const passed = now - prev; const pct = Math.max(0, Math.min(1, passed/total));
      const dash = (CIRC * pct).toFixed(1) + ' ' + (CIRC).toFixed(1);
      elRing.setAttribute('stroke-dasharray', dash);
      const d = Math.ceil((next - now)/86400000);
      elText.textContent = Math.round(pct*100) + '%';
      elDays.textContent = d + ' –¥–Ω–µ–π';
    }
    const ringHer = document.getElementById('ringHer');
    const ringHerText = document.getElementById('ringHerText');
    const ringHerDays = document.getElementById('ringHerDays');
    const ringHis = document.getElementById('ringHis');
    const ringHisText = document.getElementById('ringHisText');
    const ringHisDays = document.getElementById('ringHisDays');
    function tickRings(){
      renderRing(ringHer, ringHerText, ringHerDays, 12, 9);
      renderRing(ringHis, ringHisText, ringHisDays, 12, 28);
    }
    tickRings(); setInterval(tickRings, 1000);

    // ===== –¢–ê–ô–ú–ï–† –ù–ê –ü–†–û–ì–£–õ–ö–£ (14 —á–∏—Å–ª–æ, 12:00 MSK) + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ =====
    function nextWalkMSK(){
      const nowM = nowMskDate(); let y=nowM.getFullYear(), m=nowM.getMonth();
      let t = Date.UTC(y, m, 14, 9,0,0); // 12:00 MSK -> UTC = -3h => 09:00 UTC
      if(t <= nowUtcMs()){
        // —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü
        let nm = m+1, ny=y; if(nm>11){ nm=0; ny=y+1; }
        t = Date.UTC(ny, nm, 14, 9,0,0);
      }
      return t;
    }
    const walkEl = document.getElementById('walkTimer');
    let walkTarget = nextWalkMSK();
    let WALK_FIRED_KEY = 'walk_fired_'+walkTarget;
    function tickWalk(){
      const now = nowUtcMs();
      const diff = walkTarget - now;
      if(diff<=0){
        if(!localStorage.getItem(WALK_FIRED_KEY)){
          localStorage.setItem(WALK_FIRED_KEY,'1');
          runConfetti('confetti', 5000);
          if(Notification.permission==='granted') new Notification('–°–µ–≥–æ–¥–Ω—è –ø—Ä–æ–≥—É–ª–∫–∞!', { body: '$1' });
          else alert('–°–µ–≥–æ–¥–Ω—è –ø—Ä–æ–≥—É–ª–∫–∞! 12:00 (MSK)
–£—Ä–∞! üéâ');
        }
        // –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü
        walkTarget = nextWalkMSK(); WALK_FIRED_KEY = 'walk_fired_'+walkTarget;
      }
      const d = Math.floor(diff/86400000);
      const h = Math.floor((diff%86400000)/3600000);
      const m = Math.floor((diff%3600000)/60000);
      const s = Math.floor((diff%60000)/1000);
      walkEl.textContent = `${d}–¥ ${h}—á ${m}–º ${s}—Å`;
    }
    tickWalk(); setInterval(tickWalk, 1000);

    // ===== –õ–ê–ô–¢–ë–û–ö–° =====
    const imgs = Array.from(document.querySelectorAll('#gallery img'));
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbPrev = document.getElementById('lbPrev');
    const lbNext = document.getElementById('lbNext');
    const lbClose = document.getElementById('lbClose');
    let idx = 0, startX=null;
    function openLB(i){ idx=i; lbImg.src=imgs[idx].src; lb.classList.remove('hidden'); setTimeout(()=>lbImg.classList.add('show'),10); }
    function closeLB(){ lb.classList.add('hidden'); lbImg.classList.remove('show'); }
    function nav(dir){ idx=(idx+dir+imgs.length)%imgs.length; lbImg.classList.remove('show'); setTimeout(()=>{ lbImg.src=imgs[idx].src; lbImg.classList.add('show'); },50); }
    imgs.forEach((im,i)=> im.addEventListener('click',()=>openLB(i)) );
    lbClose.addEventListener('click', closeLB);
    lb.addEventListener('click', (e)=>{ if(e.target===lb) closeLB(); });
    lbPrev.addEventListener('click', ()=>nav(-1));
    lbNext.addEventListener('click', ()=>nav(1));
    lb.addEventListener('touchstart', e=>{ startX=e.changedTouches[0].clientX; });
    lb.addEventListener('touchend', e=>{ const dx=e.changedTouches[0].clientX-startX; if(Math.abs(dx)>40) nav(dx>0?-1:1); });
    window.addEventListener('keydown', e=>{ if(lb.classList.contains('hidden')) return; if(e.key==='ArrowLeft') nav(-1); if(e.key==='ArrowRight') nav(1); if(e.key==='Escape') closeLB(); });

    // ===== –ü–û–î–ü–ò–°–ò –ö –§–û–¢–û =====
    const captionsToggle = document.getElementById('captionsToggle');
    captionsToggle.checked = localStorage.getItem('captions')==='1';
    function applyCaptions(){ document.querySelectorAll('#gallery figcaption').forEach(f=>f.classList.toggle('hidden', !captionsToggle.checked)); }
    captionsToggle.onchange = ()=>{ localStorage.setItem('captions', captionsToggle.checked?'1':'0'); applyCaptions(); };
    applyCaptions();

    // ===== ¬´–¢—Ä–∏ —Ç—ë–ø–ª—ã–µ –≤–µ—â–∏¬ª (localStorage) =====
    const gEls = [document.getElementById('g1'), document.getElementById('g2'), document.getElementById('g3')];
    const gSaved = document.getElementById('gsaved');
    function keyFor(i){ const d = nowMskDate().toISOString().slice(0,10); return 'warm_'+i+'_'+d; }
    function loadWarm(){ gEls.forEach((el,i)=>{ el.value = localStorage.getItem(keyFor(i))||''; }); gSaved.textContent='–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–ª–æ–∫–∞–ª—å–Ω–æ).'; }
    gEls.forEach((el,i)=> el.addEventListener('input', ()=>{ localStorage.setItem(keyFor(i), el.value); gSaved.textContent='–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ ‚úì'; setTimeout(()=>gSaved.textContent='–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–ª–æ–∫–∞–ª—å–Ω–æ).',1200); }) );
    loadWarm();

    // ===== –¢–ï–ú–ê =====
    const bodyEl = document.getElementById('body');
    const themeBtn = document.getElementById('themeBtn');
    const themeIcon = document.getElementById('themeIcon');
    let dark = true;
    function applyTheme(){
      const cards = document.querySelectorAll('.glass');
      if(dark){
        bodyEl.className = "min-h-screen bg-gradient-to-br from-[#0b1220] via-[#0d0b1a] to-[#111827] text-zinc-100";
        cards.forEach(el=>{ el.classList.remove('bg-white/80','border-black/10'); el.classList.add('bg-white/10','border-white/10'); });
        themeIcon.textContent = "‚òÄÔ∏è";
      } else {
        bodyEl.className = "min-h-screen bg-gradient-to-br from-pink-50 via-violet-50 to-blue-50 text-zinc-800";
        cards.forEach(el=>{ el.classList.remove('bg-white/10','border-white/10'); el.classList.add('bg-white/80','border-black/10'); });
        themeIcon.textContent = "üåô";
      }
    }
    themeBtn.onclick = ()=>{ dark=!dark; applyTheme(); };
    applyTheme();

    // ===== –ü–û–Ø–í–õ–ï–ù–ò–ï –°–ï–ö–¶–ò–ô =====
    const io = new IntersectionObserver((entries)=>{ entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('show'); } }); },{threshold:.12});
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

    // ===== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø =====
    const notifyBtn = document.getElementById('notifyBtn');
    notifyBtn.onclick = async ()=>{
      try{ const p = await Notification.requestPermission(); if(p!=='granted'){ alert('–í–∫–ª—é—á–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —á—Ç–æ–±—ã —è –Ω–∞–ø–æ–º–Ω–∏–ª –≤ 12:00 (MSK) 14-–≥–æ.'); } else { new Notification('–ì–æ—Ç–æ–≤–æ', { body: '$1' }); } }
      catch{ alert('–ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.'); }
    };

    // ===== INSTALL (PWA manifest + SW –ø–æ–ø—ã—Ç–∫–∞) =====
    // manifest
    (function(){
      const manifest = { name: '–ù–∞—Å—Ç–µ ‚Äî –æ—Ç–∫—Ä—ã—Ç–∫–∞', short_name: '–û—Ç–∫—Ä—ã—Ç–∫–∞', display: 'standalone', start_url: '.', background_color: '#0b1220', theme_color: '#0b1220', icons: [{ src: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAACqG3SMAAAAQ0lEQVR4Ae3QQREAMAzAsHn/0y0Rr4R1oYJ5p6gkQKZ4n8wAAACw7yCk2i2vJ6z9P2y8AAAAAAAAAAAAAAAAAAAAAAL8A3c8l9c8Sg1cAAAAASUVORK5CYII=', sizes: '128x128', type: 'image/png' }] };
      const url = URL.createObjectURL(new Blob([JSON.stringify(manifest)], {type:'application/json'}));
      const link = document.createElement('link'); link.rel='manifest'; link.href=url; document.head.appendChild(link);
    })();

    // SW: –ø–æ–ø—ã—Ç–∞–µ–º—Å—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å. –ù–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö blob-URL –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è ‚Äî –æ—Ç–ª–æ–≤–∏–º –æ—à–∏–±–∫—É.
    (function(){
      if('serviceWorker' in navigator){
        const swCode = `const CACHE='card-v1'; const ASSETS=['./','./index.html','20250125_160454.jpg','20250125_164132.jpg','IMG_20250307_085915.jpg','IMG_20250313_132014.jpg','IMG_20250313_134601_edit_13096874764951.jpg','IMG_20250405_164952.jpg','IMG_20250405_172025.jpg','IMG_20250405_172033.jpg','IMG_20250417_091150.jpg'];
self.addEventListener('install',e=>{e.waitUntil(caches.open(CACHE).then(c=>c.addAll(ASSETS)))});
self.addEventListener('fetch',e=>{e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)))})`;
        try{
          const blobURL = URL.createObjectURL(new Blob([swCode], {type:'text/javascript'}));
          navigator.serviceWorker.register(blobURL, {scope:'./'}).catch(()=>{});
        }catch(e){ /* ignore */ }
      }
    })();

    // install banner
    let deferredPrompt=null; const installBtn=document.getElementById('installBtn'); const bar=document.getElementById('installBanner');
    window.addEventListener('beforeinstallprompt', (e)=>{ e.preventDefault(); deferredPrompt=e; installBtn.classList.remove('hidden'); bar.classList.remove('hidden'); });
    document.getElementById('installYes').onclick = async ()=>{ if(deferredPrompt){ deferredPrompt.prompt(); await deferredPrompt.userChoice; bar.classList.add('hidden'); }};
    document.getElementById('installNo').onclick = ()=> bar.classList.add('hidden');
    installBtn.onclick = ()=> document.getElementById('installYes').click();

    // ===== GATE (–∫–æ–¥-–¥–æ—Å—Ç—É–ø) =====
    const GATE_KEY = 'gate_ok_v2';
    const PASS = '—à–∏—à–∫–æ—Å—É—à–∏–ª–∫–∞';
    const gate = document.getElementById('gate');
    const gi = document.getElementById('gateInput');
    const ge = document.getElementById('gateError');
    function unlock(){ gate.style.display='none'; document.body.classList.remove('overflow-hidden'); localStorage.setItem(GATE_KEY,'1'); gi.value=''; }
    if(localStorage.getItem(GATE_KEY)==='1'){ unlock(); }
    $1
    document.getElementById('gateBtn') && document.getElementById('gateBtn').addEventListener('click', ()=>{
      const v = gi.value.trim().toLowerCase();
      if(v===PASS){ unlock(); }
      else { ge.classList.remove('hidden'); setTimeout(()=>ge.classList.add('hidden'), 1500); gi.select(); }
    });
        if(v===PASS){ unlock(); }
        else { ge.classList.remove('hidden'); setTimeout(()=>ge.classList.add('hidden'), 1500); }
      }
    });
  </script>
</body>
</html>
